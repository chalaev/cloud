Loading /home/shalaev/Private/work/cloud/tests/ert.el (source)...
:debug 18:03:20 str= root-test-dir=/tmp/cloud.test.4tdXU4/
:debug 18:03:20 str= hostnames=hostA hostB
:debug 18:03:20 str= remote-directory=/tmp/cloud.test.4tdXU4/mnt/remote/
:debug 18:03:20 str= remote/files=AbC
:debug 18:03:20 str= password=12345
:debug 18:03:20 str= 
:debug 18:03:20 debug-set:old values -->
:debug 18:03:20 root-test-dir= nil
:debug 18:03:20 updated values -->
:debug 18:03:20 root-test-dir = /tmp/cloud.test.4tdXU4/
:debug 18:03:20 str= localhost=hostA
:debug 18:03:20 str= ~=/tmp/cloud.test.4tdXU4/hostA/
:debug 18:03:20 str= emacs-d=~/.emacs.d/
:debug 18:03:20 str= *config-directory*=~/.emacs.d/conf/
:debug 18:03:20 str= local-dir=/tmp/cloud.test.4tdXU4/hostA/.emacs.d/conf/cloud/
:debug 18:03:20 str= local/host/conf=/tmp/cloud.test.4tdXU4/hostA/.emacs.d/conf/cloud/hostA.conf
:debug 18:03:20 str= dot-dir=~/.config-dir.hostA/
:debug 18:03:20 str= dir-1=~/dir-1.hostA/
:debug 18:03:20 str= dir-1a=~/dir-1a/
:debug 18:03:20 str= dot-file=~/.bash-config.hostA
:debug 18:03:20 str= conf-file=~/.config-dir.hostA/file.hostA
:debug 18:03:20 str= tmp-file=~/tmp-1.hostA
:debug 18:03:20 str= file-1=~/file-1.hostA
:debug 18:03:20 str= file-1a=~/file-1a.dat
:debug 18:03:20 str= file-2=~/tmp-2.hostA
:debug 18:03:20 str= 
:debug 18:03:20 str= localhost=hostB
:debug 18:03:20 str= ~=/tmp/cloud.test.4tdXU4/hostB/
:debug 18:03:20 str= emacs-d=~/.emacs.d/
:debug 18:03:20 str= *config-directory*=~/.emacs.d/conf/
:debug 18:03:20 str= local-dir=/tmp/cloud.test.4tdXU4/hostB/.emacs.d/conf/cloud/
:debug 18:03:20 str= local/host/conf=/tmp/cloud.test.4tdXU4/hostB/.emacs.d/conf/cloud/hostB.conf
:debug 18:03:20 str= dot-dir=~/.config-dir.hostB/
:debug 18:03:20 str= dir-1=~/dir-1.hostB/
:debug 18:03:20 str= dir-1a=~/dir-1a/
:debug 18:03:20 str= dot-file=~/.bash-config.hostB
:debug 18:03:20 str= conf-file=~/.config-dir.hostB/file.hostB
:debug 18:03:20 str= tmp-file=~/tmp-1.hostB
:debug 18:03:20 str= file-1=~/file-1.hostB
:debug 18:03:20 str= file-1a=~/file-1a.dat
:debug 18:03:20 str= file-2=~/tmp-2.hostB
:debug 18:03:20 str= 
Running 4 tests (2021-04-30 18:03:20-0400)
Loading /home/shalaev/Private/work/cloud/tests/cloud.el (source)...
:debug 18:03:20 debug-set:old values -->
:debug 18:03:20 ~= /home/shalaev/
:debug 18:03:20 localhost= kalinin
:debug 18:03:20 *config-directory*= /home/shalaev/.emacs.d/conf/
:debug 18:03:20 updated values -->
:debug 18:03:20 ~ = /tmp/cloud.test.4tdXU4/hostA/
:debug 18:03:20 localhost = hostA
:debug 18:03:20 *config-directory* = ~/.emacs.d/conf/
:debug 18:03:20 str= configured=yes
:debug 18:03:20 str= remote-directory=/tmp/cloud.test.4tdXU4/mnt/remote/
:debug 18:03:20 str= remote/files=AbC
:debug 18:03:20 str= password=12345
:debug 18:03:20 str= 
:debug 18:03:20 1 local/host/conf= /tmp/cloud.test.4tdXU4/hostA/.emacs.d/conf/cloud/hostA.conf
:debug 18:03:20 1 configured= yes
:debug 18:03:20 2 configured= yes
entering cloud-add
 entering add-file
  entering cloud-locate-FN
  leaving cloud-locate-FN
  entering cloud-get-file-properties
  leaving cloud-get-file-properties
  entering new-file-in
  leaving new-file-in
:info 18:03:20 file ~/file-1.hostA is now clouded
  entering upload
   entering enc-make-stanza
   leaving enc-make-stanza
   entering make-cloud-older
    entering cip-ext
    leaving cip-ext
    entering cloud-get-file-properties
    leaving cloud-get-file-properties
   leaving make-cloud-older
   entering cip-ext
   leaving cip-ext
  leaving upload
 leaving add-file
leaving cloud-add
:info 18:03:20 before syncying there are 0 files in the remote directory: 
entering cloud-sync
 entering cloud-connected-p
 leaving cloud-connected-p
 entering TS
 leaving TS
:info 18:03:20 first run: creating /tmp/cloud.test.4tdXU4/hostA/.emacs.d/conf/cloud/hostA/all and AbC
 entering reset-Makefile
 leaving reset-Makefile
 entering write-all
  entering print-hosts
   entering backspace
   leaving backspace
  leaving print-hosts
  entering print-actions
  leaving print-actions
  entering format-file
  leaving format-file
 leaving write-all
 entering gpg-encrypt
(Shell command succeeded with no output)
 leaving gpg-encrypt
 entering save-Makefile
  entering reset-Makefile
  leaving reset-Makefile
 leaving save-Makefile
:debug 18:03:21 Makefile is /tmp/cloud.test.4tdXU4/hostA/.emacs.d/conf/cloud/cloud.mk
(Shell command succeeded with no output)
:info 18:03:21 done syncing
 entering TS
 leaving TS
leaving cloud-sync
:info 18:03:21 after syncying there are 2 files in the remote directory: AbC.gpg history
:info 18:03:21 will now cloud ~/tmp-2.hostA and sync
entering cloud-add
 entering add-file
  entering cloud-locate-FN
   entering plain-name
   leaving plain-name
  leaving cloud-locate-FN
  entering cloud-get-file-properties
  leaving cloud-get-file-properties
  entering new-file-in
  leaving new-file-in
:info 18:03:21 file ~/tmp-2.hostA is now clouded
  entering upload
   entering enc-make-stanza
   leaving enc-make-stanza
   entering make-cloud-older
    entering cip-ext
    leaving cip-ext
    entering cloud-get-file-properties
    leaving cloud-get-file-properties
   leaving make-cloud-older
   entering cip-ext
   leaving cip-ext
  leaving upload
 leaving add-file
leaving cloud-add
entering cloud-sync
 entering cloud-connected-p
 leaving cloud-connected-p
 entering TS
 leaving TS
:debug 18:03:21 (or added-files upload-queue removed-files remote-actions)
 entering write-all
  entering print-hosts
   entering backspace
   leaving backspace
  leaving print-hosts
  entering print-actions
  leaving print-actions
  entering format-file
  leaving format-file
  entering format-file
  leaving format-file
 leaving write-all
 entering gpg-encrypt
(Shell command succeeded with no output)
 leaving gpg-encrypt
 entering save-Makefile
  entering reset-Makefile
  leaving reset-Makefile
 leaving save-Makefile
:debug 18:03:22 Makefile is /tmp/cloud.test.4tdXU4/hostA/.emacs.d/conf/cloud/cloud.mk
(Shell command succeeded with no output)
:info 18:03:22 done syncing
 entering TS
 leaving TS
leaving cloud-sync
:info 18:03:22 after syncying there are 3 files in the remote directory: AbC.gpg history fgx.gpg
:debug 18:03:22 leaving hostA with these files in /tmp/cloud.test.4tdXU4/mnt/remote/:
. .. AbC.gpg fgx.gpg history
   passed  1/4  cloud-and-upload
Loading /home/shalaev/Private/work/cloud/tests/cloud.el (source)...
:debug 18:03:22 debug-set:old values -->
:debug 18:03:22 ~= /tmp/cloud.test.4tdXU4/hostA/
:debug 18:03:22 localhost= kalinin
:debug 18:03:22 *config-directory*= ~/.emacs.d/conf/
:debug 18:03:22 updated values -->
:debug 18:03:22 ~ = /tmp/cloud.test.4tdXU4/hostA/
:debug 18:03:22 localhost = hostA
:debug 18:03:22 *config-directory* = ~/.emacs.d/conf/
:debug 18:03:22 str= configured=yes
:debug 18:03:22 str= remote-directory=/tmp/cloud.test.4tdXU4/mnt/remote/
:debug 18:03:22 str= remote/files=AbC
:debug 18:03:22 str= password=12345
:debug 18:03:22 str= 
:debug 18:03:22 1 local/host/conf= /tmp/cloud.test.4tdXU4/hostA/.emacs.d/conf/cloud/hostA.conf
:debug 18:03:22 1 configured= yes
:debug 18:03:22 2 configured= yes
entering cloud-get-file-properties
leaving cloud-get-file-properties
entering get-file-properties*
 entering cloud-locate-FN
 leaving cloud-locate-FN
 entering cloud-get-file-properties
 leaving cloud-get-file-properties
leaving get-file-properties*
:info 18:03:22 deftest cloud-init: config file size = 99 bytes,
and its content is
configured=yes
remote-directory=/tmp/cloud.test.4tdXU4/mnt/remote/
remote/files=AbC
password=12345

:debug 18:03:22 leaving hostA with these files in /tmp/cloud.test.4tdXU4/mnt/remote/:
. ..
   passed  2/4  cloud-init
Loading /home/shalaev/Private/work/cloud/tests/cloud.el (source)...
:debug 18:03:23 debug-set:old values -->
:debug 18:03:23 ~= /tmp/cloud.test.4tdXU4/hostA/
:debug 18:03:23 localhost= kalinin
:debug 18:03:23 *config-directory*= ~/.emacs.d/conf/
:debug 18:03:23 updated values -->
:debug 18:03:23 ~ = /tmp/cloud.test.4tdXU4/hostA/
:debug 18:03:23 localhost = hostA
:debug 18:03:23 *config-directory* = ~/.emacs.d/conf/
:debug 18:03:23 str= configured=yes
:debug 18:03:23 str= remote-directory=/tmp/cloud.test.4tdXU4/mnt/remote/
:debug 18:03:23 str= remote/files=AbC
:debug 18:03:23 str= password=12345
:debug 18:03:23 str= 
:debug 18:03:23 1 local/host/conf= /tmp/cloud.test.4tdXU4/hostA/.emacs.d/conf/cloud/hostA.conf
:debug 18:03:23 1 configured= yes
:debug 18:03:23 2 configured= yes
:debug 18:03:23 tmp-conf= /tmp/cloud.test.4tdXU4/hostA/.emacs.d/conf/cloud/hostA.conf.tmp
:debug 18:03:23 file-1= ~/file-1.hostA
:info 18:03:23 read-write-conf: tmp-conf => /tmp/cloud.test.4tdXU4/hostA/.emacs.d/conf/cloud/hostA.conf.tmp
:info 18:03:23 
Here is the auto-generated (by cloud.el) config file: ==>
configured=yes
remote-directory=/tmp/cloud.test.4tdXU4/mnt/remote/
remote/files=AbC
password=12345
 <== end of config file

:info 18:03:23 
Here is my artificial config file: ==>
remote-directory=/tmp/cloud.test.4tdXU4/mnt/remote/
black-extensions=abc def
black-root-dirs=/trash/
remote/files=XYZ
password=myDogsName
 <== end of config file

:debug 18:03:23 str= remote-directory=/tmp/cloud.test.4tdXU4/mnt/remote/
:debug 18:03:23 str= black-extensions=abc def
:debug 18:03:23 str= black-root-dirs=/trash/
:debug 18:03:23 str= remote/files=XYZ
:debug 18:03:23 str= password=myDogsName
:debug 18:03:23 str= 
:debug 18:03:23 test read-write-conf> remote-directory=> /tmp/cloud.test.4tdXU4/mnt/remote/, black-extensions=> (abc def)
:debug 18:03:23 leaving hostA with these files in /tmp/cloud.test.4tdXU4/mnt/remote/:
. ..
   passed  3/4  read-write-conf
  skipped  4/4  save-then-upload

Ran 4 tests, 3 results as expected, 1 skipped (2021-04-30 18:03:23-0400)

1 skipped results:
  SKIPPED  save-then-upload

:debug 18:03:23 flushing comments before quiting emacs
